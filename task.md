# ai-MyNotes 開発タスクリスト

## Phase 1: 設計・基盤構築（1週間）

### 設計ドキュメント作成（最優先）
- [x] データモデルの詳細設計
  - [x] ERモデル図作成
  - [x] メモデータ構造の定義
  - [x] バリデーション規則の策定
- [x] 画面遷移フロー図作成
  - [x] 3画面間の遷移パターン図示
  - [x] 各画面の役割・責務の明確化
- [x] 状態遷移図作成
  - [x] アプリケーション状態の管理設計
  - [x] リアルタイム保存の状態管理

### 環境構築
- [x] DevContainer環境の構築
  - [x] Dockerfileの作成（.NET開発用）
  - [x] devcontainer.jsonの設定
  - [x] 開発環境のセットアップ確認

### プロジェクト初期化
- [x] Blazor WebAssemblyプロジェクトの作成
  - [x] プロジェクトテンプレートの作成
  - [x] 基本的なプロジェクト構成の整備
  - [x] フォルダ構造の作成（Components, Services, Models, Pages）

### 依存関係とライブラリ
- [x] Bootstrap 5.3の導入・設定
  - [x] CDN経由でのBootstrap読み込み設定
  - [x] カスタムCSSの基本設定
  - [x] Bootstrapコンポーネント動作確認
- [x] IndexedDB接続ライブラリの導入
  - [x] 適切なNuGetパッケージの調査・選定
  - [x] ライブラリのインストール・設定
  - [x] 実行確認
- [x] テストライブラリの設定
  - [x] bUnitの導入・設定
  - [x] xUnitの設定・確認

### ルーティング設定（2画面構成）
- [x] 基本ルーティングの設定
  - [x] メモ編集画面ルート（"/" および "/edit/{id?}"）
  - [x] メモ一覧画面ルート（"/list"）
- [x] ナビゲーションコンポーネントの作成
- [x] **単体テスト作成**: ルーティング関連コンポーネントのテスト
  - [x] MemoEditコンポーネントのbUnitテスト作成
  - [x] MemoListコンポーネントのbUnitテスト作成
  - [x] ナビゲーションコンポーネントのテスト作成
  - [x] **テスト実行と確認**

### パフォーマンス検証
- [ ] Blazor WebAssemblyパフォーマンス実測
  - [ ] 基本的なプロジェクトでの起動時間測定
  - [ ] iOS Chrome環境での検証

## Phase 2: 核心機能実装（1週間）

### データモデル
- [ ] メモデータモデルの定義
  - [ ] Memoクラスの作成
  - [ ] プロパティ定義（Id, Title, Content, CreatedAt, UpdatedAt）
  - [ ] データ検証・バリデーションロジック
- [ ] **単体テスト作成**: メモデータモデルのテスト
  - [ ] プロパティ設定・取得のテスト
  - [ ] バリデーションロジックのテスト
  - [ ] **テスト実行と確認**

### データアクセス層
- [ ] MemoServiceクラスの実装
  - [ ] IndexedDBとの接続処理
  - [ ] CRUD操作メソッドの実装
    - [ ] CreateMemoAsync（新規作成）
    - [ ] GetMemosAsync（全件取得・降順ソート）
    - [ ] GetMemoByIdAsync（ID指定取得）
    - [ ] UpdateMemoAsync（更新）
    - [ ] DeleteMemoAsync（削除）
- [ ] **単体テスト作成**: MemoServiceのテスト
  - [ ] 各CRUD操作の正常系テスト
  - [ ] 異常系テスト（存在しないID等）
  - [ ] IndexedDB接続テスト
  - [ ] **テスト実行と確認**

### メモ編集画面（Bootstrap対応）
- [ ] MemoEditコンポーネントの開発
  - [ ] メモ本文入力エリア（本文1行目が自動タイトル）
    - [ ] Bootstrap Formコンポーネント使用
    - [ ] レスポンシブ対応テキストエリア
  - [ ] 新規作成・編集モードの切り替え対応
  - [ ] リアルタイム保存機能
    - [ ] 3秒停止での自動保存
    - [ ] フォーカス離脱時の即座保存（優先）
    - [ ] フォーカス離脱時のタイマーキャンセル機能
    - [ ] 保存状態の視覚フィードバック
  - [ ] メモ一覧への遷移ボタン（Bootstrap Button）
  - [ ] 意図しない終了時のデータ破棄対応
- [ ] **単体テスト作成**: MemoEditコンポーネントのテスト（bUnit）
  - [ ] コンポーネントレンダリングテスト
  - [ ] 新規作成モードのテスト
  - [ ] 編集モードのテスト
  - [ ] 自動保存機能のテスト
  - [ ] **テスト実行と確認**

### メモ一覧画面（Bootstrap + 左スワイプ削除対応）
- [ ] MemoListコンポーネントの開発
  - [ ] メモ一覧表示機能（Bootstrap Card使用）
    - [ ] レスポンシブグリッドシステム対応
    - [ ] カード形式レイアウト
  - [ ] 作成日時降順ソート表示
  - [ ] メモカード表示内容
    - [ ] タイトル表示（本文1行目）
    - [ ] 本文プレビュー（2行制限）
    - [ ] 作成日時表示
  - [ ] メモタップでの編集画面遷移
  - [ ] 左スワイプ削除機能の実装
    - [ ] スワイプ検知（100px以上で削除ボタン表示）
    - [ ] 削除ボタン表示・非表示制御
    - [ ] 削除確認ダイアログ
    - [ ] 物理削除実行
  - [ ] 新規作成ボタン（Bootstrap Button）
- [ ] **単体テスト作成**: MemoListコンポーネントのテスト（bUnit）
  - [ ] メモ一覧表示のテスト
  - [ ] ソート機能のテスト
  - [ ] 空リスト表示のテスト
  - [ ] 画面遷移のテスト
  - [ ] 左スワイプ削除機能のテスト
    - [ ] スワイプ検知のテスト
    - [ ] 削除ボタン表示のテスト
    - [ ] 削除確認ダイアログのテスト
    - [ ] 削除処理のテスト
  - [ ] **テスト実行と確認**

### リアルタイム保存の詳細実装（フォーカス離脱優先）
- [ ] 自動保存タイマーの実装
  - [ ] debounce処理（3秒間隔）
  - [ ] フォーカス離脱時の即座保存（優先）
  - [ ] フォーカス離脱時のタイマーキャンセル機能
  - [ ] 競合処理の回避機能
- [ ] 保存状態UI実装
  - [ ] 保存中インジケーター
  - [ ] 保存完了フィードバック
  - [ ] 保存失敗エラー表示

### エラーハンドリング戦略
- [ ] IndexedDB操作エラーハンドリング
  - [ ] 接続失敗時の処理
  - [ ] データ保存失敗時の処理
  - [ ] データ読み込み失敗時の処理
- [ ] グローバルエラーハンドラーの実装
- [ ] ユーザー向けエラーメッセージの設計

## Phase 3: 仕上げ・テスト（1週間）

### Bootstrap UI最適化
- [ ] Bootstrapテーマのカスタマイズ
  - [ ] アプリ専用カラーパレットの適用
  - [ ] モバイル操作性の最適化
  - [ ] タッチ操作に適したボタンサイズ調整
- [ ] 左スワイプ削除のUI/UX改善
  - [ ] スワイプアニメーション調整
  - [ ] 削除ボタンの視覚的フィードバック改善
  - [ ] エラー時のフォールバック動作

### PWA設定
- [ ] PWA基本設定
  - [ ] manifest.jsonの作成
    - [ ] アプリ名・説明・アイコン設定
    - [ ] 表示モード・テーマカラー設定
    - [ ] GitHub PagesベースURL対応
  - [ ] Service Workerの実装
    - [ ] キャッシュ戦略の設定
    - [ ] オフライン対応
- [ ] PWAアイコンの作成・設定
  - [ ] 各種サイズのアイコン準備
  - [ ] iOS対応アイコン設定

### GitHub Pages デプロイ設定
- [ ] GitHub Actions CI/CD設定
  - [ ] Blazor WebAssemblyビルド設定
  - [ ] GitHub Pagesへのデプロイ設定
  - [ ] 自動デプロイワークフローの作成
- [ ] 本番環境での動作確認
  - [ ] PWA機能の動作確認
  - [ ] IndexedDBの動作確認

### 統合テスト・検証（2画面構成対応）
- [ ] 統合テスト作成
  - [ ] エンドツーエンドシナリオテスト
  - [ ] 2画面間遷移の統合テスト
  - [ ] 左スワイプ削除の統合テスト
  - [ ] データ永続化統合テスト
  - [ ] Bootstrap UI統合テスト
  - [ ] **統合テスト実行と確認**
- [ ] **全体テストスイート実行**
  - [ ] 全単体テストの実行
  - [ ] 全統合テストの実行
  - [ ] **テスト結果の確認と修正**
  - [ ] **テストカバレッジの確認**

### パフォーマンス最適化
- [ ] 初期ロード時間の短縮
  - [ ] バンドルサイズの最適化
  - [ ] 不要な依存関係の削除
- [ ] レンダリング性能の改善
  - [ ] コンポーネント最適化
  - [ ] メモリ使用量の最適化

### iOS Chrome実機テスト（2画面構成 + 左スワイプ）
- [ ] 実機でのPWA動作確認
  - [ ] ホーム画面追加の動作確認
  - [ ] オフライン機能の確認
- [ ] 左スワイプ削除機能の実機テスト
  - [ ] タッチ操作の精度確認
  - [ ] スワイプ距離判定の調整
  - [ ] iOS Chromeでの操作感確認
- [ ] パフォーマンステスト
  - [ ] 初期起動時間測定
  - [ ] 操作レスポンス測定
- [ ] ユーザビリティテスト準備
  - [ ] 2画面構成のテストシナリオ作成
  - [ ] 左スワイプ削除の操作タスク定義

### ユーザビリティ向上施策（Bootstrap + 左スワイプ最適化）
- [ ] UI/UXの最終調整
  - [ ] Bootstrap活用のモバイル表示最適化
  - [ ] 左スワイプ操作の改善
  - [ ] タッチ操作の視覚的フィードバック調整
- [ ] アクセシビリティ対応
  - [ ] スクリーンリーダー対応
  - [ ] 左スワイプ代替操作の提供
  - [ ] キーボードナビゲーション対応

## 品質管理

### コードレビュー・テスト確認
- [ ] コード品質チェック
  - [ ] 命名規則の統一確認
  - [ ] コメントの適切性確認
  - [ ] セキュリティ観点のレビュー
- [ ] **テストコードのレビュー**
  - [ ] テストケースの網羅性確認
  - [ ] テストコードの品質確認
  - [ ] テストメンテナンス性の確認

### ドキュメント作成
- [ ] README.mdの更新
  - [ ] セットアップ手順の記載
  - [ ] 使用方法の説明
  - [ ] デプロイ手順の記載
- [ ] **テスト仕様書の作成**
  - [ ] テストケース一覧
  - [ ] テスト実行手順
- [ ] 運用ドキュメントの作成

## リリース準備

### 最終確認・テスト（2画面構成）
- [ ] 全機能の動作確認
  - [ ] 2画面すべての機能確認
  - [ ] 左スワイプ削除機能の確認
  - [ ] Bootstrap UI動作の確認
  - [ ] 画面遷移の確認
  - [ ] データ永続化の確認
- [ ] **最終テスト実行**
  - [ ] 全テストスイートの実行
  - [ ] リグレッションテストの実行
  - [ ] **テスト結果の最終確認**
- [ ] セキュリティチェック
  - [ ] XSS脆弱性チェック
  - [ ] データ漏洩リスクチェック

### 本番デプロイ
- [ ] 本番環境への最終デプロイ
- [ ] 本番環境での動作確認
- [ ] パフォーマンス最終測定
- [ ] ユーザビリティ目標達成確認

---

## 重要な注意事項

### 品質管理ルール
- **各機能実装後に必ず対応する単体テストを作成・実行する**
- **テスト失敗時は修正後に再実行し、合格を確認してから次の工程に進む**
- **Phase2完了時に全単体テストを実行し、品質を確保する**

### リスク管理
- PWA機能の早期検証を実施し、技術的制約を把握する
- リアルタイム保存機能は段階的に実装し、パフォーマンス影響を監視する
- iOS Chrome環境での継続的なテストを実施する

### 成功基準
- 機能達成度: 要求仕様の100%実装
- パフォーマンス: PWA化後2秒以内の初期起動
- 安定性: クラッシュなしでの動作
- ユーザビリティ: 100人中60人以上がマニュアルなしで基本操作を完了