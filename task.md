# ai-MyNotes 開発タスクリスト

## Phase 1: 設計・基盤構築（1週間）

### 設計ドキュメント作成（最優先）
- [x] データモデルの詳細設計
  - [x] ERモデル図作成
  - [x] メモデータ構造の定義
  - [x] バリデーション規則の策定
- [x] 画面遷移フロー図作成
  - [x] 3画面間の遷移パターン図示
  - [x] 各画面の役割・責務の明確化
- [x] 状態遷移図作成
  - [x] アプリケーション状態の管理設計
  - [x] リアルタイム保存の状態管理

### 環境構築
- [x] DevContainer環境の構築
  - [x] Dockerfileの作成（.NET開発用）
  - [x] devcontainer.jsonの設定
  - [x] 開発環境のセットアップ確認

### プロジェクト初期化
- [x] Blazor WebAssemblyプロジェクトの作成
  - [x] プロジェクトテンプレートの作成
  - [x] 基本的なプロジェクト構成の整備
  - [x] フォルダ構造の作成（Components, Services, Models, Pages）

### 依存関係とライブラリ
- [x] Bootstrap 5.3の導入・設定
  - [x] CDN経由でのBootstrap読み込み設定
  - [x] カスタムCSSの基本設定
  - [x] Bootstrapコンポーネント動作確認
- [x] IndexedDB接続ライブラリの導入
  - [x] 適切なNuGetパッケージの調査・選定
  - [x] ライブラリのインストール・設定
  - [x] 実行確認
- [x] テストライブラリの設定
  - [x] bUnitの導入・設定
  - [x] xUnitの設定・確認

### ルーティング設定（2画面構成）
- [x] 基本ルーティングの設定
  - [x] メモ編集画面ルート（"/" および "/edit/{id?}"）
  - [x] メモ一覧画面ルート（"/list"）
- [x] ナビゲーションコンポーネントの作成
- [x] **単体テスト作成**: ルーティング関連コンポーネントのテスト
  - [x] MemoEditコンポーネントのbUnitテスト作成
  - [x] MemoListコンポーネントのbUnitテスト作成
  - [x] ナビゲーションコンポーネントのテスト作成
  - [x] **テスト実行と確認**

### パフォーマンス検証
- [x] Blazor WebAssemblyパフォーマンス実測
  - [x] 基本的なプロジェクトでの起動時間測定
  - [x] iOS Chrome環境での検証

## Phase 2: 核心機能実装（1週間）

### データモデル
- [x] メモデータモデルの定義
  - [x] Memoクラスの作成
  - [x] プロパティ定義（Id, Title, Content, CreatedAt, UpdatedAt）
  - [x] データ検証・バリデーションロジック
- [x] **単体テスト作成**: メモデータモデルのテスト
  - [x] プロパティ設定・取得のテスト
  - [x] バリデーションロジックのテスト
  - [x] **テスト実行と確認**

### データアクセス層
- [x] MemoServiceクラスの実装
  - [x] IndexedDBとの接続処理
  - [x] CRUD操作メソッドの実装
    - [x] CreateMemoAsync（新規作成）
    - [x] GetMemosAsync（全件取得・降順ソート）
    - [x] GetMemoByIdAsync（ID指定取得）
    - [x] UpdateMemoAsync（更新）
    - [x] DeleteMemoAsync（削除）
- [x] **単体テスト作成**: MemoServiceのテスト
  - [x] 各CRUD操作の正常系テスト
  - [x] 異常系テスト（存在しないID等）
  - [x] IndexedDB接続テスト
  - [x] **テスト実行と確認**

### メモ編集画面（Bootstrap対応）
- [x] MemoEditコンポーネントの開発
  - [x] メモ本文入力エリア（本文1行目が自動タイトル）
    - [x] Bootstrap Formコンポーネント使用
    - [x] レスポンシブ対応テキストエリア
  - [x] 新規作成・編集モードの切り替え対応
  - [x] リアルタイム保存機能
    - [x] 3秒停止での自動保存
    - [x] フォーカス離脱時の即座保存（優先）
    - [x] フォーカス離脱時のタイマーキャンセル機能
    - [x] 保存状態の視覚フィードバック
  - [x] メモ一覧への遷移ボタン（Bootstrap Button）
  - [x] 意図しない終了時のデータ破棄対応
- [x] **単体テスト作成**: MemoEditコンポーネントのテスト（bUnit）
  - [x] コンポーネントレンダリングテスト
  - [x] 新規作成モードのテスト
  - [x] 編集モードのテスト
  - [x] 自動保存機能のテスト
  - [x] **テスト実行と確認**

### メモ一覧画面（Bootstrap + 左スワイプ削除対応）
- [x] MemoListコンポーネントの開発
  - [x] メモ一覧表示機能（Bootstrap Card使用）
    - [x] レスポンシブグリッドシステム対応
    - [x] カード形式レイアウト
  - [x] 作成日時降順ソート表示
  - [x] メモカード表示内容
    - [x] タイトル表示（本文1行目）
    - [x] 本文プレビュー（2行制限）
    - [x] 作成日時表示
  - [x] メモタップでの編集画面遷移
  - [x] 左スワイプ削除機能の実装
    - [x] スワイプ検知（100px以上で削除ボタン表示）
    - [x] 削除ボタン表示・非表示制御
    - [x] 削除確認ダイアログ
    - [x] 物理削除実行
  - [x] 新規作成ボタン（Bootstrap Button）
- [x] **単体テスト作成**: MemoListコンポーネントのテスト（bUnit）
  - [x] メモ一覧表示のテスト
  - [x] ソート機能のテスト
  - [x] 空リスト表示のテスト
  - [x] 画面遷移のテスト
  - [x] 左スワイプ削除機能のテスト
    - [x] スワイプ検知のテスト
    - [x] 削除ボタン表示のテスト
    - [x] 削除確認ダイアログのテスト
    - [x] 削除処理のテスト
  - [x] **テスト実行と確認**

### リアルタイム保存の詳細実装（フォーカス離脱優先）
- [x] 自動保存タイマーの実装
  - [x] debounce処理（3秒間隔）
  - [x] フォーカス離脱時の即座保存（優先）
  - [x] フォーカス離脱時のタイマーキャンセル機能
  - [x] 競合処理の回避機能
- [x] 保存状態UI実装
  - [x] 保存中インジケーター
  - [x] 保存完了フィードバック
  - [x] 保存失敗エラー表示
- [x] **単体テスト作成**: リアルタイム保存機能のテスト（bUnit）
  - [x] 自動保存タイマーのテスト
  - [x] フォーカス離脱優先保存のテスト
  - [x] タイマーキャンセルのテスト
  - [x] 競合処理回避のテスト
  - [x] 保存状態UIインジケーターのテスト
  - [x] 保存完了フィードバックのテスト
  - [x] 保存失敗エラー表示のテスト
  - [x] debounce処理のテスト
  - [x] **テスト実行と確認**

### エラーハンドリング戦略
- [x] IndexedDB操作エラーハンドリング
  - [x] 接続失敗時の処理
  - [x] データ保存失敗時の処理
  - [x] データ読み込み失敗時の処理
- [x] グローバルエラーハンドラーの実装
- [x] ユーザー向けエラーメッセージの設計
- [x] **単体テスト作成**: エラーハンドリング機能のテスト（bUnit）
  - [x] IndexedDB接続失敗のテスト
  - [x] データ保存失敗のテスト
  - [x] データ読み込み失敗のテスト
  - [x] グローバルエラーハンドラーのテスト
  - [x] エラーメッセージ表示のテスト
  - [x] エラー復旧処理のテスト
  - [x] エラーログ記録のテスト
  - [x] ネットワークエラーハンドリングのテスト
  - [x] **テスト実行と確認**

## Phase 3: 仕上げ・テスト（1週間）

### Bootstrap UI最適化
- [x] Bootstrapテーマのカスタマイズ
  - [x] アプリ専用カラーパレットの適用
  - [x] モバイル操作性の最適化
  - [x] タッチ操作に適したボタンサイズ調整
- [x] 左スワイプ削除のUI/UX改善
  - [x] スワイプアニメーション調整
  - [x] 削除ボタンの視覚的フィードバック改善
  - [x] エラー時のフォールバック動作

### PWA設定
- [x] PWA基本設定
  - [x] manifest.jsonの作成
    - [x] アプリ名・説明・アイコン設定
    - [x] 表示モード・テーマカラー設定
    - [x] GitHub PagesベースURL対応
  - [　] Service Workerの実装
    - [　] キャッシュ戦略の設定
    - [　] オフライン対応
- [x] PWAアイコンの作成・設定
  - [x] 各種サイズのアイコン準備
  - [x] iOS対応アイコン設定

### GitHub Pages デプロイ設定
- [x] GitHub Actions CI/CD設定
  - [x] Blazor WebAssemblyビルド設定
  - [x] GitHub Pagesへのデプロイ設定
  - [x] 自動デプロイワークフローの作成
- [x] 本番環境での動作確認
  - [x] PWA機能の動作確認
  - [x] IndexedDBの動作確認

### 統合テスト・検証（2画面構成対応）
- [ ] 統合テスト作成
  - [ ] エンドツーエンドシナリオテスト
  - [ ] 2画面間遷移の統合テスト
  - [ ] 左スワイプ削除の統合テスト
  - [ ] データ永続化統合テスト
  - [ ] Bootstrap UI統合テスト
  - [ ] **統合テスト実行と確認**
- [ ] **全体テストスイート実行**
  - [ ] 全単体テストの実行
  - [ ] 全統合テストの実行
  - [ ] **テスト結果の確認と修正**
  - [ ] **テストカバレッジの確認**

### パフォーマンス最適化
- [ ] 初期ロード時間の短縮
  - [ ] バンドルサイズの最適化
  - [ ] 不要な依存関係の削除
- [ ] レンダリング性能の改善
  - [ ] コンポーネント最適化
  - [ ] メモリ使用量の最適化

### iOS Chrome実機テスト（2画面構成 + 左スワイプ）
- [ ] 実機でのPWA動作確認
  - [ ] ホーム画面追加の動作確認
  - [ ] オフライン機能の確認
- [ ] 左スワイプ削除機能の実機テスト
  - [ ] タッチ操作の精度確認
  - [ ] スワイプ距離判定の調整
  - [ ] iOS Chromeでの操作感確認
- [ ] パフォーマンステスト
  - [ ] 初期起動時間測定
  - [ ] 操作レスポンス測定
- [ ] ユーザビリティテスト準備
  - [ ] 2画面構成のテストシナリオ作成
  - [ ] 左スワイプ削除の操作タスク定義

### ユーザビリティ向上施策（Bootstrap + 左スワイプ最適化）
- [ ] UI/UXの最終調整
  - [ ] Bootstrap活用のモバイル表示最適化
  - [ ] 左スワイプ操作の改善
  - [ ] タッチ操作の視覚的フィードバック調整
- [ ] アクセシビリティ対応
  - [ ] スクリーンリーダー対応
  - [ ] 左スワイプ代替操作の提供
  - [ ] キーボードナビゲーション対応

## 品質管理

### コードレビュー・テスト確認
- [ ] コード品質チェック
  - [ ] 命名規則の統一確認
  - [ ] コメントの適切性確認
  - [ ] セキュリティ観点のレビュー
- [ ] **テストコードのレビュー**
  - [ ] テストケースの網羅性確認
  - [ ] テストコードの品質確認
  - [ ] テストメンテナンス性の確認

### ドキュメント作成
- [ ] README.mdの更新
  - [ ] セットアップ手順の記載
  - [ ] 使用方法の説明
  - [ ] デプロイ手順の記載
- [ ] **テスト仕様書の作成**
  - [ ] テストケース一覧
  - [ ] テスト実行手順
- [ ] 運用ドキュメントの作成

## リリース準備

### 最終確認・テスト（2画面構成）
- [ ] 全機能の動作確認
  - [ ] 2画面すべての機能確認
  - [ ] 左スワイプ削除機能の確認
  - [ ] Bootstrap UI動作の確認
  - [ ] 画面遷移の確認
  - [ ] データ永続化の確認
- [ ] **最終テスト実行**
  - [ ] 全テストスイートの実行
  - [ ] リグレッションテストの実行
  - [ ] **テスト結果の最終確認**
- [ ] セキュリティチェック
  - [ ] XSS脆弱性チェック
  - [ ] データ漏洩リスクチェック

### 本番デプロイ
- [ ] 本番環境への最終デプロイ
- [ ] 本番環境での動作確認
- [ ] パフォーマンス最終測定
- [ ] ユーザビリティ目標達成確認

---

## 重要な注意事項

### 品質管理ルール
- **各機能実装後に必ず対応する単体テストを作成・実行する**
- **テスト失敗時は修正後に再実行し、合格を確認してから次の工程に進む**
- **Phase2完了時に全単体テストを実行し、品質を確保する**

### リスク管理
- PWA機能の早期検証を実施し、技術的制約を把握する
- リアルタイム保存機能は段階的に実装し、パフォーマンス影響を監視する
- iOS Chrome環境での継続的なテストを実施する

### 成功基準
- 機能達成度: 要求仕様の100%実装
- パフォーマンス: PWA化後2秒以内の初期起動
- 安定性: クラッシュなしでの動作
- ユーザビリティ: 100人中60人以上がマニュアルなしで基本操作を完了