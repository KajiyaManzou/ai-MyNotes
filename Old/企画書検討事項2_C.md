
# ai-MyNotes 企画書問題点指摘と検討事項（第2版）

## 企画書更新内容の分析と新たな問題点

### 1. ブラウザ変更による技術的影響

**変更点**: Chrome → Safari
**問題点**:
- iOS SafariとChromeでのPWA対応状況が大きく異なる
- SafariのPWA機能はより制限的
- IndexedDB実装の微妙な差異が存在

**具体的影響**:
- Safari PWAではService Worker機能が限定的
- ホーム画面追加の仕様がChrome PWAと異なる
- JavaScriptエンジンの性能差（V8 vs JavaScriptCore）

**必要な対応**:
- Safari特有のPWA制約調査
- IndexedDB Safari実装の検証
- パフォーマンステストの再実施

### 2. 画面構成の複雑化

**変更点**: 2画面 → 3画面構成
**新規追加**: メモ一覧編集画面

**問題点**:
- 画面遷移パターンが複雑化（6パターン）
- ナビゲーションの一貫性が困難
- 状態管理の複雑性増加

**画面遷移フロー**:
```
メモ編集 ←→ メモ一覧 ←→ メモ一覧編集
   ↑          ↓
   └──────────┘
```

**検討必要事項**:
- 各画面間の戻るボタン動作
- ブラウザバック対応
- 画面状態の保持方法

### 3. UX設計の安全性問題

**変更点**: 「確認無しで削除」
**問題点**:
- 誤操作による重要メモの完全消失リスク
- ユーザビリティテストで高確率で問題指摘される仕様
- アンドゥ機能の未実装

**リスク評価**:
- **高リスク**: データ復旧不可の破壊的操作
- **ユーザー体験**: フラストレーション増加
- **品質指標への影響**: 60%のユーザビリティ目標達成困難

**推奨改善案**:
1. 削除確認ダイアログの追加
2. 論理削除（ゴミ箱機能）の実装
3. 一定期間後の物理削除

### 4. リアルタイム保存仕様の詳細不足

**変更点**: 「3秒停止」の明記
**残存問題**:
- フォーカス外れ時の即座保存との競合処理未定義
- 保存失敗時のリトライ処理未記載
- ユーザーフィードバックの仕様不足

**技術的課題**:
- タイマーリセットロジックの複雑化
- IndexedDB書き込み競合の回避
- 保存状態の視覚化

### 5. 本番環境設定の課題

**新規追加**: GitHub Pages + GitHub Actions
**問題点**:
- Blazor WebAssemblyの静的ファイル配信要件未確認
- PWA manifest.jsonのベースURL設定
- Service WorkerのHTTPS要件

**必要な検証**:
- GitHub PagesでのPWA動作確認
- サブディレクトリ配信時のパス解決
- キャッシュ戦略の調整

### 6. パフォーマンス目標の非現実性

**変更点**: 「PWA化以後、2秒以内の初期起動」
**問題点**:
- Blazor WebAssemblyの実際の起動時間（通常5-10秒）
- PWA化後の改善効果が過度に期待されている
- Safari特有の実行性能が未考慮

**現実的な目標**:
- 初回アクセス: 8-12秒
- PWA起動: 3-5秒
- 操作レスポンス: 1秒以内

### 7. ユーザビリティ目標の曖昧さ

**変更点**: 「100人中60人以上がマニュアルなしで基本操作を完了」
**問題点**:
- 「基本操作」の定義が不明確
- 測定方法の具体性不足
- テスト環境・条件の未設定

**必要な定義**:
- 基本操作タスクリスト
- テスト実施条件
- 成功判定基準

### 8. データモデル設計の継続的不備

**未解決問題**:
- メモの一意識別子生成方法
- データバリデーション仕様
- インデックス設計

**必要なデータモデル**:
```typescript
interface Memo {
  id: string;              // UUID生成
  title: string;           // 最大100文字
  content: string;         // 最大10000文字
  createdAt: Date;
  updatedAt: Date;
  version: number;         // 楽観的排他制御
}
```

## 新たに発生した技術的リスク

### 高リスク
1. **Safari PWA制約**: 機能制限により要件未達成の可能性
2. **確認なし削除**: 重大なユーザビリティ問題
3. **GitHub Pages PWA**: 配信環境の技術的制約

### 中リスク
1. **3画面遷移**: 実装複雑性と保守性の低下
2. **パフォーマンス目標**: 非現実的な期待値設定
3. **リアルタイム保存**: 競合処理の実装困難

### 低リスク
1. **ユーザビリティ測定**: 定義曖昧性による評価困難
2. **データモデル**: 設計遅延リスク

## 優先対応すべき修正事項

### 緊急（Phase 1開始前）
1. **UX仕様の見直し**: 削除確認機能の追加検討
2. **Safari PWA制約**: 詳細調査と対応方針決定
3. **パフォーマンス目標**: 現実的な値への修正

### 高優先度（Phase 1中）
1. **データモデル詳細設計**: バリデーション・インデックス設計
2. **画面遷移仕様**: 3画面間のナビゲーション設計
3. **GitHub Pages設定**: PWA配信要件の検証

### 中優先度（Phase 2開始前）
1. **リアルタイム保存**: 競合処理・エラーハンドリング仕様
2. **ユーザビリティテスト**: 測定方法・基準の明確化

## 推奨する企画書修正

### 修正すべき箇所
1. **削除機能**: 確認ダイアログまたはゴミ箱機能の追加
2. **パフォーマンス目標**: Safari WebAssembly実性能を基準とした現実的な設定
3. **技術制約**: Safari PWA特有の制限事項の明記
4. **データモデル**: 詳細仕様の追加

### 追加すべき項目
1. **エラーハンドリング戦略**: 保存失敗・ネットワーク断等の対応
2. **セキュリティ考慮**: XSS対策・データ暗号化の検討
3. **アクセシビリティ**: WCAG準拠レベルの設定

## 結論

第2版の企画書は一部改善されているが、新たに重大な問題が発生している。特に「確認なし削除」は即座に修正が必要な仕様である。また、Safari環境への変更により技術的な再検証が必要となっている。これらの問題を早期に解決しなければ、開発中の手戻りや品質問題を引き起こすリスクが高い。